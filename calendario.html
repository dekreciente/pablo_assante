<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendario</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://use.typekit.net/psw6vhf.css">
  <link rel="icon" type="image/x-icon" href="/fotos/favicon.ico">
</head>
<body>

 <header>
  <div class="name"><a href="/index.html">Pablo Assante</a></div>

  <!-- Botón hamburguesa (solo visible en móvil) -->
  <button class="menu-toggle" aria-expanded="false" aria-controls="site-menu" aria-label="Abrir menú">
    <span class="bar"></span><span class="bar"></span><span class="bar"></span>
  </button>

  <nav id="site-menu">
    <ul>
      <li><a href="/sobremi.html">Sobre mí</a></li>
      <li><a href="/galeria.html">Galería</a></li>
      <li><a href="/calendario.html">Calendario</a></li>
      <li><a href="/contacto.html">Contacto</a></li>
    </ul>
  </nav>
</header>

<main class="agenda-content">
  <div class="agenda-wrap" role="region" aria-labelledby="agenda" tabindex="0">
    <table class="agenda-table" id="agenda">
      <thead>
        <tr>
          <th data-type="text" aria-sort="none">EVENTO</th>
          <th data-type="text" aria-sort="none">CATEGORIA</th>
          <th data-type="date" aria-sort="none" class="is-date">FECHA</th>
          <th data-type="text" aria-sort="none">LUGAR</th>
          <th class="thin"></th>
        </tr>
      </thead>

      <tbody>
        <!-- Usa data-sort para ordenar (ISO o string normalizado) -->
        <tr data-sort-date="2025-11-22">
          <td class="ev-title">L'Elisir d'Amore</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">22/11/2025 - 15/12/2025</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/ca/elisir-amore" aria-label="Open event">↗</a></td>
        </tr>

        <tr data-sort-date="2025-11-29">
          <td class="ev-title">La pequeña Flauta Mágica</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">29/11/2025 - 30/11/2025</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/es/petita-flauta-magica-2025" aria-label="Open event">↗</a></td>
        </tr>

        <tr data-sort-date="2026-01-12">
          <td class="ev-title">Tristán e Isolda</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">12/01/2026 - 31/01/2026</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/ca/tristan-und-isolde" aria-label="Open event">↗</a></td>
        </tr>

        <tr data-sort-date="2026-02-16">
          <td class="ev-title">La Gioconda</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">16/02/2026 - 02/03/2026</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/ca/gioconda#:~:text=La%20Gioconda%20d'Amilcare%20Ponchielli,eclosi%C3%B3%20de%20la%20%E2%80%9CGiovane%20Scuola%E2%80%9D" aria-label="Open event">↗</a></td>
        </tr>

         <tr data-sort-date="2026-03-17">
          <td class="ev-title">Manon Lescaut</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">17/02/2026 - 01/04/2026</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/ca/manon-lescaut#:~:text=Manon%20Lescaut%2C%20%C3%B2pera%20en%20quatre,%C3%B2pera%20Manon%2C%20de%20Jules%20Massenet." aria-label="Open event">↗</a></td>
        </tr>

         <tr data-sort-date="2026-05-30">
          <td class="ev-title">Al Cor del Liceu</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">30/05/2026 - 31/05/2026</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/en/cor-petit-liceu" aria-label="Open event">↗</a></td>
        </tr>


         <tr data-sort-date="2026-06-04">
          <td class="ev-title">Las Bodas de Figaro</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">04/06/2026 - 21/06/2026</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/en/cor-petit-liceu" aria-label="Open event">↗</a></td>
        </tr>

         <tr data-sort-date="2026-07-04">
          <td class="ev-title">Falstaff</td>
          <td class="ev-tags">Concierto</td>
          <td class="ev-date">04/07/2026 - 19/07/2026</td>
          <td class="ev-loc">Gran Teatre del Liceu</td>
          <td class="ev-link"><a href="https://www.liceubarcelona.cat/ca/falstaff" aria-label="Open event">↗</a></td>
        </tr>
        
      </tbody>
    </table>
  </div>
</main>




<footer class="site-footer fixed" role="contentinfo">
  <div class="footer-inner">
    <div class="footer-left">
      <strong>Pablo Assante</strong>
      <span> · Director de coro & director de orquesta</span>
    </div>

    <nav class="footer-nav" aria-label="Enlaces de pie">
      <a href="/contacto.html">Contacto</a>
      <a href="mailto:info@tudominio.com" rel="noopener">Email</a>
      <a href="https://www.instagram.com/pablo.assante/" target="_blank" rel="noopener">Instagram</a>
    </nav>

    <div class="footer-right">
      <span>© <span id="year"></span> Pablo Assante</span>
      <span class="sep">·</span>
      <span>Barcelona</span>
    </div>
  </div>
</footer>
<script>
  // Año automático
  document.getElementById('year').textContent = new Date().getFullYear();
</script>






<script>
  (function () {
    const btn = document.querySelector('.menu-toggle');
    const nav = document.getElementById('site-menu');

    if (!btn || !nav) return;

    function setOpen(open) {
      btn.setAttribute('aria-expanded', String(open));
      nav.classList.toggle('open', open);
    }

    btn.addEventListener('click', () => {
      const isOpen = btn.getAttribute('aria-expanded') === 'true';
      setOpen(!isOpen);
    });

    // Cerrar al pulsar Esc
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') setOpen(false);
    });

    // Cerrar al tocar un enlace
    nav.addEventListener('click', (e) => {
      if (e.target.closest('a')) setOpen(false);
    });
  })();
</script>

<script>
  // --- Simple Lightbox for images, <video> and YouTube iframes ---
  const lb = document.querySelector('.lb-backdrop');
  const lbMedia = document.querySelector('.lb-media');
  const lbCaption = document.querySelector('.lb-caption');
  const lbClose = document.querySelector('.lb-close');

  function openLB(node, caption){
    lb.hidden = false;
    lbMedia.innerHTML = '';

    const tag = node.tagName.toLowerCase();
    let clone;

    if (tag === 'img') {
      clone = new Image();
      clone.src = node.currentSrc || node.src;
      clone.alt = node.alt || '';
      clone.decoding = 'async';
    } else if (tag === 'video') {
      clone = document.createElement('video');
      clone.controls = true;
      clone.playsInline = true;
      clone.muted = false;

      // copy sources if present
      const sources = node.querySelectorAll('source');
      if (sources.length) {
        sources.forEach(s => {
          const c = document.createElement('source');
          c.src = s.src;
          c.type = s.type || '';
          clone.appendChild(c);
        });
      } else if (node.src) {
        clone.src = node.src;
      }
    } else if (tag === 'iframe') {
      // e.g. YouTube thumbnail -> open bigger iframe
      clone = document.createElement('iframe');
      clone.src = node.src.replace(/(\?[^#]*)?$/, (m) =>
        (m ? m + '&' : '?') + 'autoplay=1'
      );
      clone.setAttribute('allow', 'autoplay; encrypted-media; picture-in-picture; fullscreen');
      clone.allowFullscreen = true;
      clone.frameBorder = '0';
    }

    if (clone) lbMedia.appendChild(clone);
    lbCaption.textContent = caption || '';
  }

  function closeLB(){
    lb.hidden = true;
    lbMedia.innerHTML = '';
  }

  // Open when clicking media inside .media-frame
  document.addEventListener('click', (e) => {
    const media = e.target.closest('.media-frame img, .media-frame video, .media-frame iframe');
    if (media) {
      const fig = media.closest('figure');
      const cap = fig?.querySelector('figcaption')?.textContent?.trim() || '';
      openLB(media, cap);
    }
    if (e.target === lb || e.target === lbClose) closeLB();
  });

  // Close with Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !lb.hidden) closeLB();
  });
</script>

<script>
(function(){
  const mq = window.matchMedia('(max-width: 640px)');
  const table = document.querySelector('.agenda-table');
  if (!table) return;

  let container;

  function buildCards(){
    if (container) return; // ya creado
    container = document.createElement('div');
    container.className = 'agenda-cards';
    table.parentNode.insertBefore(container, table.nextSibling);

    const rows = table.tBodies[0]?.rows || [];
    for (const tr of rows){
      const [tdTitle, tdTag, tdDate, tdLoc, tdLink] = tr.cells;

      const d = document.createElement('details');
      const s = document.createElement('summary');
      s.textContent = tdTitle?.textContent?.trim() || '(Sin título)';
      d.appendChild(s);

      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.innerHTML = `
        <div><strong>Categoría:</strong> ${tdTag?.textContent || ''}</div>
        <div><strong>Fecha:</strong> ${tdDate?.textContent || ''}</div>
        <div><strong>Lugar:</strong> ${tdLoc?.textContent || ''}</div>
      `;
      d.appendChild(meta);

      const linkCell = tdLink?.querySelector('a');
      if (linkCell){
        const linkWrap = document.createElement('div');
        linkWrap.className = 'link';
        const a = document.createElement('a');
        a.href = linkCell.href; a.target = linkCell.target || '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = 'Ver evento ↗';
        linkWrap.appendChild(a);
        d.appendChild(linkWrap);
      }

      container.appendChild(d);
    }
  }

  function toggleMode(e){
    if (mq.matches){
      table.style.display = 'none';
      buildCards();
      if (container) container.style.display = '';
    } else {
      table.style.display = '';
      if (container) container.style.display = 'none';
    }
  }

  mq.addEventListener ? mq.addEventListener('change', toggleMode)
                      : mq.addListener(toggleMode);
  toggleMode();
})();
</script>



<script>
  (function () {
    const html = document.documentElement;

    // Lanzar fade-in del <main>
    function markLoaded(){ html.classList.add('page-loaded'); }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => requestAnimationFrame(markLoaded));
    } else {
      requestAnimationFrame(markLoaded);
    }

    // Fade-out al navegar a otra página interna (header se mantiene)
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href]');
      if (!a) return;

      const url = new URL(a.href, location.href);
      const sameOrigin = url.origin === location.origin;
      const newTab = a.target === '_blank' || a.hasAttribute('download');
      const onlyHash = url.pathname === location.pathname && url.hash;

      if (!sameOrigin || newTab || onlyHash) return;

      e.preventDefault();
      html.classList.add('page-leaving');

      // Sincroniza con la duración de .page-leaving main (0.35s por defecto)
      setTimeout(() => { location.href = a.href; }, 350);
    });

    // Compatibilidad bfcache (volver atrás/adelante)
    window.addEventListener('pageshow', (e) => {
      if (e.persisted) {
        html.classList.remove('page-leaving');
        html.classList.add('page-loaded');
      }
    });
  })();
</script>


<script>
  (function () {
    const html = document.documentElement;

    // Lanzar fade-in del <main>
    function markLoaded(){ html.classList.add('page-loaded'); }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => requestAnimationFrame(markLoaded));
    } else {
      requestAnimationFrame(markLoaded);
    }

    // Fade-out al navegar a otra página interna (header se mantiene)
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href]');
      if (!a) return;

      const url = new URL(a.href, location.href);
      const sameOrigin = url.origin === location.origin;
      const newTab = a.target === '_blank' || a.hasAttribute('download');
      const onlyHash = url.pathname === location.pathname && url.hash;

      if (!sameOrigin || newTab || onlyHash) return;

      e.preventDefault();
      html.classList.add('page-leaving');

      // Sincroniza con la duración de .page-leaving main (0.35s por defecto)
      setTimeout(() => { location.href = a.href; }, 350);
    });

    // Compatibilidad bfcache (volver atrás/adelante)
    window.addEventListener('pageshow', (e) => {
      if (e.persisted) {
        html.classList.remove('page-leaving');
        html.classList.add('page-loaded');
      }
    });
  })();
</script>


</body>
</html>
